# –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–µ–∫—Ç–∞ sinaps

## –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

* –ö–æ–º–ø—å—é—Ç–µ—Ä —É—Ä–æ–≤–Ω—è —á—É—Ç—å –≤—ã—à–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
* –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –Ω–∞ –Ω–µ–º Node.JS, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ (v12.0.0 –∏ –≤—ã—à–µ)
* –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è MongoDB –≤–µ—Ä—Å–∏–∏ **–≤—ã—à–µ 3.0.0** (–≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Raspbian, –º–æ–∂–µ—Ç–µ –¥–∞–∂–µ –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è, —É–≤—ã üòü). –ú–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–µ, –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ localhost, –∫–∞–∫ –µ—Å—Ç—å, —á—Ç–æ–±—ã –±—ã–ª–æ –º–µ–Ω—å—à–µ –ø—Ä–æ–±–ª–µ–º. –í—Å–µ —Ä–∞–≤–Ω–æ –≤—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –±—É–¥–µ—Ç –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏–∑-–∑–∞ –≤–∏–¥–µ–æ—Å–≤—è–∑–∏
* –ù—É –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, —Ö–æ—Ç—è –±—ã –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª sinaps.js. –°–∫–æ—Ä–æ –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ dotenv

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```
const ip = 'localhost' - –∑–¥–µ—Å—å –≤—ã –≤–ø–∏—Å—ã–≤–∞–µ—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP –≤–∞—à–µ–π –º–∞—à–∏–Ω—ã. –ï—Å–ª–∏ –≤—ã –µ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –Ω–∞ localhost, —É –≤–∞—Å –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å UDP —Å–æ–∫–µ—Ç—ã (—É–≤—ã)
const publicIP = 'localhost' - –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –≤–ø–∏—Å–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π IP –∞–¥—Ä–µ—Å. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π ip
const port = 443 - –ø–æ—Ä—Ç. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ https - 443. –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ - 80 –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π.
const isHTTPS = true; - –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ https. –û–¥–Ω–∞–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–∏–Ω—É—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ –ø–∞–ø–∫—É certs, –∏–±–æ –∫–ª—é—á –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–º –ª–µ–∂–∞—Ç –Ω—É–∂–Ω—ã –ª–∏—à—å –¥–ª—è DTLS –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

...

key: fs.readFileSync('./certs/privkey.pem'),      - –≤–æ—Ç –∑–¥–µ—Å—å, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –Ω—É–∂–Ω–æ –≤–ø–∏—Å–∞—Ç—å –ø—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É
cert: fs.readFileSync('./certs/sinaps-cert.pem')  - –∞ –∑–¥–µ—Å—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É

```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```
npm install –∏–ª–∏ yarn install
```

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```
node sinaps.js
```

–ï—Å–ª–∏ –≤—ã –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç–µ –Ω–∞ –ª–∏–Ω—É–∫—Å, (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ Red Hat, –∫–∞–∫ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ sinaps), —Ç–æ —É –≤–∞—Å –º–æ–∂–µ—Ç —Å—Ç–æ—è—Ç—å —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è Node.JS, –∏ –ø–æ—ç—Ç–æ–º—É —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ö–æ—á–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á --harmony:

```
node --harmony sinaps.js
```

## –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º üõ†

* –ö–∞—Ç–∞–ª–æ–≥ stun - —Ñ–∞–π–ª—ã –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ STUN —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ñ–æ—Ä–º–∞—Ç —Ç–∏–ø–∏—á–Ω–æ–≥–æ SDP —Å–æ–æ–±—â–µ–Ω–∏—è  
* –ö–∞—Ç–∞–ª–æ–≥ dtls - —Å–æ–∑–¥–∞–Ω–∏–µ DTLS —Å–µ—Å—Å–∏–∏ - https://tools.ietf.org/html/rfc6347.
* –ö–∞—Ç–∞–ª–æ–≥ srtp - —Å–æ–∑–¥–∞–Ω–∏–µ SRTP —Å–µ—Å—Å–∏–∏. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ - https://tools.ietf.org/html/rfc3711
* –ö–∞—Ç–∞–ª–æ–≥ node_components - –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –≤—Å–µ —Ä–æ—É—Ç—ã
* node_components/webrtc - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç/—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤-–≤–∏–¥–µ–æ—Å–≤—è–∑–µ–π